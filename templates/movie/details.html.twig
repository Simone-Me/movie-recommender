{% extends 'base.html.twig' %}

{% block title %}{{ movie.title }} - MovieFinder{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/style.css') }}">
{% endblock %}

{% block body %}
    {% if movie.backdrop_path %}
        <div class="position-relative">
            <img src="https://image.tmdb.org/t/p/original{{ movie.backdrop_path }}" alt="{{ movie.title }}" class="movie-backdrop">
            <div class="overlay"></div>
        </div>
    {% endif %}

    <div class="container">
        <div class="movie-details-container">
            <div class="row">
                <div class="col-md-4 col-lg-3">
                    {% if movie.poster_path %}
                        <img src="https://image.tmdb.org/t/p/w500{{ movie.poster_path }}" alt="{{ movie.title }}" class="movie-poster mb-4">
                    {% else %}
                        <div class="movie-poster bg-light d-flex align-items-center justify-content-center mb-4">
                            <i class="fas fa-film fa-3x text-muted"></i>
                        </div>
                    {% endif %}
                </div>
                <div class="col-md-8 col-lg-9">
                    <h1>{{ movie.title }}</h1>

                    <div class="movie-meta my-4">
                        {% if movie.release_date %}
                            <span class="me-4">
                                <i class="far fa-calendar-alt me-2"></i>
                                {{ movie.release_date|date('d/m/Y') }}
                            </span>
                        {% endif %}

                        <span class="me-4">
                            <i class="fas fa-star me-2"></i>
                            <span class="rating">{{ movie.vote_average|number_format(1) }}</span>
                            <small class="text-muted">/10 ({{ movie.vote_count }} votes)</small>
                        </span>
                    </div>
                    
                    {% if movie.genres %}
                        <div class="movie-genres mb-4">
                            {% for genre in movie.genres %}
                                <span class="genre-badge">{{ genre.name }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}

                    {% if movie.overview %}
                        <div class="movie-overview">
                            <h4>Synopsis</h4>
                            <p class="lead">{{ movie.overview }}</p>
                        </div>
                    {% endif %}

                    <div class="mt-4">
                        <a href="{{ path('app_home') }}" class="btn btn-primary">
                            <i class="fas fa-arrow-left me-2"></i>
                            Retour aux films
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
